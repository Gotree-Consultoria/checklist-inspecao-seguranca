<section class="group-page">
	<div class="container">
		<h1 class="page-title">Gerenciamento de InspeÃ§Ãµes de SeguranÃ§a</h1>

		<div class="action-buttons">
			<button class="action-btn action-checklist create-checklist" (click)="go('checklist')">
				<span class="icon">âœ…</span>
				<span class="text">
					<strong>Novo Checklist</strong>
					<small>InspeÃ§Ã£o estruturada</small>
				</span>
			</button>
			<button class="action-btn action-report create-report" (click)="go('report')">
				<span class="icon">ğŸ“</span>
				<span class="text">
					<strong>Novo RelatÃ³rio</strong>
					<small>Registro fotogrÃ¡fico</small>
				</span>
			</button>
			<button class="action-btn action-aep create-aep" (click)="go('aep')">
				<span class="icon">ğŸ›¡ï¸</span>
				<span class="text">
					<strong>Novo AEP</strong>
					<small>Registro de AEP</small>
				</span>
			</button>
			<!-- Novo botÃ£o solicitado: Novo Checklist (NR) colocado ao lado do Novo AEP -->
			<button class="action-btn action-checklist-nr create-checklist-nr" (click)="go('checklist-nr')">
				<span class="icon">ğŸ“‹</span>
				<span class="text">
					<strong>Novo Checklist (NR)</strong>
					<small>InspeÃ§Ã£o NR</small>
				</span>
			</button>
		</div>

		<div class="history-section">
			<h2>HistÃ³rico</h2>
			<div class="table-container">
				<table>
					<thead>
						<tr>
							<th>Tipo</th>
							<th>TÃ­tulo</th>
							<th>Empresa</th>
							<th>Data</th>
							<th>AÃ§Ãµes</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngIf="loading">
							<td colspan="5">Carregando...</td>
						</tr>
						<tr *ngIf="!loading && history?.length === 0">
							<td colspan="5">Nenhum histÃ³rico encontrado.</td>
						</tr>
						<tr *ngFor="let item of history" [attr.data-doc-id]="item.id || item.reportId">
							<td>{{ formatDocumentType(item.type || item.documentType) }}</td>
							<td>{{ item.title || item.type || 'Documento' }}</td>
							<td>{{ item.companyName || item.company || '' }}</td>
							<td>{{ formatDateToBrazil(item.inspectionDate || item.createdAt) }}</td>
							<td class="actions-cell">
								<button class="btn" (click)="downloadDoc(item)">Baixar</button>
								<button class="btn" (click)="viewDoc(item)">Visualizar</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</section>

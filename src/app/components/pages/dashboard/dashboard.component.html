<section class="dashboard-page page">
  <div class="container">
    <h1 class="page-title">Dashboard de Inspeções (Mock)</h1>

    <!-- KPI row -->
    <div class="kpi-row">
      <div class="kpi-card">
        <div class="kpi-value">{{metrics.totalInspections}}</div>
        <div class="kpi-label">Inspeções (Mês)</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-value">{{metrics.openNonConformities}}</div>
        <div class="kpi-label">NCs Abertas</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-value">{{metrics.avgCompletionDays}}</div>
        <div class="kpi-label">Tempo Médio (dias)</div>
      </div>
    </div>

    <!-- Charts grid -->
    <div class="charts-grid">
      <div class="chart-card">
        <h4>Checklists por Mês</h4>
        <div class="bar-chart">
          <div class="bar-row" *ngFor="let m of monthData">
            <div class="bar-label">{{m.month}}</div>
            <div class="bar-wrap"><div class="bar" [style.width.%]="barPercent(m.value)"></div></div>
            <div class="bar-value">{{m.value}}</div>
          </div>
        </div>
      </div>

      <div class="chart-card">
        <h4>Status por Categoria</h4>
        <div class="pie-mock">[ Gráfico de pizza mock ]</div>
        <ul class="legend">
          <li *ngFor="let s of statusLegend"><span class="legend-color" [style.background]="s.color"></span>{{s.label}} ({{s.value}})</li>
        </ul>
      </div>
    </div>

    <!-- Recent inspections (kept) -->
    <div class="latest-inspection" id="latestInspectionContent">
      <ng-container *ngIf="latestInspection; else loading">
        <p><strong>Título:</strong> {{latestInspection.title}}</p>
        <p><strong>Data:</strong> {{latestInspection.date}}</p>
        <p><strong>Empresa:</strong> {{latestInspection.company}}</p>
      </ng-container>
      <ng-template #loading>
        <p *ngIf="loadingLatest">Carregando última inspeção...</p>
        <p *ngIf="!loadingLatest && !latestInspection">Nenhuma inspeção encontrada.</p>
      </ng-template>
      <div class="recent-list">
        <h4>Inspeções Recentes</h4>
        <ul id="dashboardHistoryList">
          <li *ngFor="let item of recentItems">{{item.title}} - {{item.date}}</li>
          <li *ngIf="!recentItems || recentItems.length === 0">Nenhum histórico disponível.</li>
        </ul>
      </div>
    </div>
  </div>
</section>

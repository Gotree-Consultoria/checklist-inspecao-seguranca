/* Estilos modernos para NAVBAR */
.top-nav { display:flex; justify-content:space-between; align-items:center; padding:12px 28px; background: linear-gradient(180deg, rgba(0,90,50,0.98) 0%, var(--verde-escuro) 100%); color: var(--branco); box-shadow: var(--shadow-md); gap:12px; position:relative; z-index:80; }
.top-nav .nav-left { display:flex; align-items:center; gap:12px; }
.top-nav .brand { font-weight:700; letter-spacing:.4px; min-width:0; color: var(--branco); font-size:1.05rem; }
.hamburger { display: none; background: transparent; border: none; padding: 6px; border-radius:8px; align-items:center; flex-direction:column; gap:4px; cursor:pointer; }
.hamburger .bar { display:block; width:18px; height:2px; background: rgba(255,255,255,0.95); margin:0; border-radius:2px; transition: transform .18s ease, opacity .12s ease; }
.top-nav .brand { white-space: nowrap; }
.top-nav.open .hamburger .bar:nth-child(1) { transform: translateY(6px) rotate(45deg); }
.top-nav.open .hamburger .bar:nth-child(2) { opacity: 0; }
.top-nav.open .hamburger .bar:nth-child(3) { transform: translateY(-6px) rotate(-45deg); }
.top-nav .nav-links { list-style:none; display:flex; gap:12px; margin:0; padding:0; align-items:center; }
.top-nav .nav-links a { color: var(--nav-item-color); text-decoration:none; padding:8px 12px; border-radius:8px; font-size:0.95rem; display:inline-block; transition: background .18s ease, transform .12s ease; }
.nav-icon { display:none; width:24px; height:24px; flex:0 0 24px; }
.nav-text { display:inline-block; }
.top-nav .nav-links a:hover { background: var(--nav-item-hover-bg); transform: translateY(-2px); }
.top-nav .nav-links a:hover .nav-icon { transform: scale(1.12); }
.nav-icon { transition: transform .12s ease, color .12s ease; }
.top-nav .nav-links a.active { background: transparent; color: var(--nav-item-color); font-weight:700; position:relative; }
.top-nav .nav-links a.active::after { content: ''; position:absolute; left:12px; right:12px; bottom:-8px; height:3px; background: var(--nav-item-active-underline); border-radius:4px; }
.top-nav .user-mini { display:flex; flex-direction:column; align-items:flex-end; margin-right:12px; }

.nav-right { display:flex; align-items:center; gap:12px; }
.user-dropdown { position: relative; }
.user-trigger { display:flex; align-items:center; gap:10px; background: transparent; border: none; color: var(--branco); cursor: pointer; padding: 6px 8px; border-radius:8px; }
.mini-initials { background: rgba(255,255,255,0.95); color: var(--verde-escuro); width:36px; height:36px; display:flex; align-items:center; justify-content:center; border-radius:50%; font-weight:700; font-size:0.95rem; box-shadow: 0 2px 6px rgba(2,6,23,0.12); }
.mini-info { display:flex; flex-direction:column; align-items:flex-start; text-align:left; }
.mini-name { font-weight:600; font-size:0.95rem; color: var(--nav-item-color); }
.mini-role { font-size:0.78rem; opacity:0.9; color: var(--nav-item-color); }
.chevron { margin-left:6px; transition: transform .15s ease; }
.user-trigger[aria-expanded="true"] .chevron { transform: rotate(180deg); }
.user-menu { position:absolute; right:0; top:calc(100% + 8px); background: var(--branco); color:#222; border-radius:10px; box-shadow: 0 8px 20px rgba(2,6,23,0.12); display:none; min-width:180px; flex-direction:column; padding:8px; z-index:80; }
.user-menu[aria-hidden="false"] { display:flex; }
.user-menu-item { background: transparent; border: none; padding:10px 12px; text-align:left; cursor:pointer; width:100%; border-radius:6px; }
.user-menu-item:hover { background: #f6f7f9; }

/* Mobile / responsividade */
@media (max-width: 768px) {
  .top-nav { flex-wrap:wrap; padding:10px 16px; }
  .top-nav .nav-left { width:100%; display:flex; align-items:center; justify-content:space-between; }
  .top-nav .nav-links { flex-wrap:wrap; gap:8px; margin-top:8px; }
  .top-nav .nav-links a { padding:10px 14px; }
  /* remover comportamento hamburger: mostrar links na barra horizontalmente */
  .hamburger { display:none; }
  .top-nav .nav-links { display:flex; flex-direction:row; gap:8px; margin-top:0; align-items:center; margin:0 auto; }
  .top-nav .nav-links a { padding:6px 8px; }
  .top-nav .nav-links { transition: none; overflow-x: auto; }
  .top-nav .nav-right { width:100%; display:flex; justify-content:flex-end; margin-top:6px; }
}

/* Mobile adjustments (smaller screens) */
@media (max-width: 600px) {
  .top-nav { padding:10px 12px; align-items:flex-start; position: relative; }
  /* linha separadora entre ícones e usuário - centralizada com position fixed */
  .top-nav::before {
    content: '';
    position: fixed;
    top: 72px;
    left: 0;
    right: 0;
    width: 100%;
    height: 1px;
    background: rgba(255,255,255,0.15);
    z-index: 90;
  }
  /* safe-area support: add extra top spacing on devices with notch/camera */
  .top-nav {
    /* base top padding preserved for browsers without safe-area support */
    padding-top: 18px; /* increased base offset */
    /* prefer env(), then the older constant() for legacy WebKit; both ignored if unsupported */
    padding-top: calc(18px + env(safe-area-inset-top));
    padding-top: calc(18px + constant(safe-area-inset-top));
  }
  .top-nav .brand { font-size:1rem; }

  /* keep links horizontal on small screens; show icons (hide text) */
  .top-nav .nav-links { display:flex; flex-direction:row; gap:6px; width:100%; margin:0; justify-content:center; }
  .top-nav .nav-links a { display:flex; align-items:center; padding:8px 10px; border-radius:8px; }
  .top-nav .nav-links a .nav-text { display: none; }
  .top-nav .nav-links a .nav-icon { display: inline-block; margin-right:4px; }

  /* centralizar os ícones horizontalmente e aumentar área de toque para mobile */
  .top-nav .nav-links { padding: 4px 0; }
    /* tighten spacing a bit more for mobile */
    .top-nav .nav-links { gap:2px; }
    .top-nav .nav-links a { min-width:34px; display:flex; align-items:center; justify-content:center; padding:5px 6px; }

  /* Add extra top padding to the links container to avoid overlap with camera/notch */
  .top-nav .nav-links {
    /* give extra breathing room above the icons to avoid notch overlap */
    padding-top: calc(12px + env(safe-area-inset-top));
    padding-top: calc(12px + constant(safe-area-inset-top));
  }

  /* reduzir tamanho do ícone para agrupar visualmente */
    /* slightly smaller icons to group visually while keeping touch area acceptable */
    .top-nav .nav-links a .nav-icon { width:18px; height:18px; flex:0 0 18px; }

  /* hover mais visível em dispositivos com pointer */
  @media (hover: hover) and (pointer: fine) {
    .top-nav .nav-links a:hover { background: rgba(255,255,255,0.06); }
  }

  /* ensure action area (user) is accessible and aligned */
  .top-nav .nav-right { width:100%; display:flex; justify-content:space-between; gap:12px; margin-top:10px; }
  .user-trigger { padding:8px 10px; }

  /* Mostrar mini-info no mobile: manter bolinha ao lado do nome e um traço sutil acima da área */
  .mini-info { display:flex; flex-direction:column; margin-left:8px; }
  .user-trigger { padding:8px 12px; gap:10px; position:relative; }

  /* manter a bolinha ao lado do nome (linha) */
  .user-trigger { flex-direction:row; align-items:center; }
  .mini-initials { width:40px; height:40px; }
  .mini-info { margin-left:8px; margin-top:0; align-items:flex-start; text-align:left; }
  .mini-name { font-size:0.95rem; }
  .mini-role { font-size:0.78rem; margin-top:2px; color: rgba(255,255,255,0.85); }
  .mini-name { font-size:0.95rem; color: var(--branco); }
  .mini-role { font-size:0.8rem; color: rgba(255,255,255,0.9); }

  /* dropdown should align to the right edge with full-bleed feel on small screens */
  .user-menu { right:8px; left:auto; min-width:150px; }

  /* increase hit area for touch devices */
  .top-nav .nav-links a, .user-menu-item { touch-action: manipulation; }
}

/* Backdrop when mobile nav open */
.nav-backdrop { position: fixed; inset: 0; background: rgba(2,6,23,0.35); opacity: 0; visibility: hidden; transition: opacity .18s ease; z-index: 70; }
.nav-backdrop.show { opacity: 1; visibility: visible; }
